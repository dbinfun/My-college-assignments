è¿™æ˜¯ä¸€ä¸ªå®‰å“å¤ä¹ è®°å½•ï¼Œæˆ‘è§‰å¾—ä¸è€ƒçš„ä¸œè¥¿éƒ½~~åˆ é™¤çº¿~~ä¼ºå€™ ğŸ—‘ï¸

tips: `github`å·¦ä¸Šè§’â†–æˆ–è€…å³ä¸Šè§’â†—æœ‰ç›®å½•

ğŸ:**å¾ˆé‡è¦å§ï¼Ÿ**

å…¶ä¸­ç¬¬äºŒç« ç”¨æˆ·ç•Œé¢ä½•ç¬¬ä¸‰ç« å¤šç•Œé¢æœ€é‡è¦

å†…å®¹ä»…ä¾›å‚è€ƒ

[TOC]



# ç¬¬ä¸€ç« Andriod ç³»ç»ŸåŠå…¶å¼€å‘è¿‡ç¨‹

## Androidå‘å±•å†ç¨‹

2003å¹´10æœˆï¼ŒAndyRubinï¼ˆå®‰è¿ªé²å®¾ï¼‰ç­‰äººåˆ›å»ºAndroidå…¬å¸ï¼Œå¹¶ç»„å»ºAndroidå›¢é˜Ÿã€‚

2005å¹´8æœˆ17æ—¥ï¼ŒGoogleä½è°ƒæ”¶è´­äº†æˆç«‹ä»…22ä¸ªæœˆçš„é«˜ç§‘æŠ€ä¼ä¸šAndroidåŠå…¶å›¢é˜Ÿã€‚å®‰

  è¿ªé²å®¾æˆä¸ºGoogleå…¬å¸å·¥ç¨‹éƒ¨å‰¯æ€»è£ï¼Œç»§ç»­è´Ÿè´£Androidé¡¹ç›®ã€‚

2007å¹´11æœˆ5æ—¥ï¼Œè°·æ­Œå…¬å¸æ­£å¼å‘å¤–ç•Œå±•ç¤ºäº†è¿™æ¬¾åä¸ºAndroidçš„æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨è¿™å¤©è°·æ­Œå®£å¸ƒå»ºç«‹ä¸€ä¸ªå…¨çƒæ€§çš„è”ç›Ÿç»„ç»‡â€œå¼€æ”¾æ‰‹æŒè®¾å¤‡è”ç›Ÿâ€ï¼ˆOpenHandsetAllianceï¼‰

2008å¹´ï¼Œåœ¨GoogleI/Oå¤§ä¼šä¸Šï¼Œè°·æ­Œæå‡ºäº†AndroidHALæ¶æ„å›¾ï¼Œåœ¨åŒå¹´8æœˆ18å·ï¼ŒAndroidè·å¾—äº†ç¾å›½è”é‚¦é€šä¿¡å§”å‘˜ä¼šï¼ˆFCCï¼‰çš„æ‰¹å‡†

2008å¹´9æœˆï¼Œè°·æ­Œæ­£å¼å‘å¸ƒäº†Android1.0ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯Androidç³»ç»Ÿæœ€æ—©çš„ç‰ˆæœ¬ã€‚

## Androidç³»ç»Ÿçš„ç³»ç»Ÿæ¶æ„

### åº”ç”¨ç¨‹åºæ¡†æ¶å±‚

åº”ç”¨ç¨‹åºæ¡†æ¶å¯ä»¥è¯´æ˜¯ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒï¼Œæ˜¯æ‰€æœ‰å‚ä¸å¼€å‘çš„ç¨‹åºå‘˜å…±åŒä½¿ç”¨å’Œéµå®ˆçš„çº¦å®šã€‚

è¯¥æ¡†æ¶åŒ…å«ï¼š`æ´»åŠ¨ç®¡ç†å™¨`ã€`çª—å£ç®¡ç†å™¨`ã€`å†…å®¹æä¾›è€…`ã€`è§†å›¾ç³»ç»Ÿ`ã€`åŒ…ç®¡ç†å™¨`ã€`ç”µè¯ç®¡ç†å™¨`ã€`èµ„æºç®¡ç†å™¨`ã€`ä½ç½®ç®¡ç†å™¨`ã€`é€šçŸ¥ç®¡ç†å™¨`ã€`XMPPæœåŠ¡`

æ´»åŠ¨ç®¡ç†å™¨:ç®¡ç†å„ä¸ªåº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä»¥åŠé€šå¸¸çš„å¯¼èˆªå›é€€åŠŸèƒ½ã€‚

çª—å£ç®¡ç†å™¨ï¼šç®¡ç†æ‰€æœ‰çš„çª—å£ç¨‹åº

å†…å®¹æä¾›å™¨ï¼šä½¿å¾—ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´å­˜å–æˆ–è€…åˆ†äº«æ•°æ®ã€‚

è§†å›¾ç³»ç»Ÿ:æ„å»ºåº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„å°±æ˜¯æ–‡æœ¬æ¡†ã€æŒ‰é’®ç­‰ã€‚ 

é€šå‘Šç®¡ç†å™¨:ä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥åœ¨çŠ¶æ€æ æ˜¾ç¤ºè‡ªå®šä¹‰çš„æç¤ºä¿¡æ¯ï¼Œé€šè¿‡NotificationManager ã€ Notificationè¿™ä¸¤ä¸ªç±»å¯ä»¥å®Œæˆåœ¨çŠ¶æ€æ æ˜¾ç¤ºæç¤ºçš„ä¿¡æ¯ã€‚ 

åŒ…ç®¡ç†å™¨ï¼šå®‰å“ç³»ç»Ÿå†…çš„ç¨‹åºç®¡ç†ï¼ŒPackage Mangeræ˜¯ä¸€ä¸ªå®é™…ä¸Šç®¡ç†åº”ç”¨ç¨‹åºå®‰è£…ã€å¸è½½å’Œå‡çº§çš„APIã€‚

ç”µè¯ç®¡ç†å™¨:ç®¡ç†æ‰€æœ‰çš„ç§»åŠ¨è®¾å¤‡ ç”¨äºç®¡ç†æ‰‹æœºé€šè¯çŠ¶æ€ã€è·å–ç”µè¯ä¿¡æ¯ï¼ˆè®¾å¤‡ã€simå¡ã€ç½‘ç»œä¿¡æ¯ï¼‰ï¼Œç›‘å¬ç”µè¯çŠ¶æ€ä»¥åŠè°ƒç”¨ç”µè¯æ‹¨å·å™¨æ‹¨æ‰“ç”µè¯ã€‚

èµ„æºç®¡ç†å™¨:æä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„å„ç§éä»£ç èµ„æºã€‚

ä½ç½®ç®¡ç†å™¨:æä¾›ä½ç½®æœåŠ¡

### è¿è¡Œåº“å±‚

é€šè¿‡ä¸€äº›c/c++åº“æ¥ä¸ºAndroidæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒï¼Œå¦‚SQLiteæä¾›äº†æ•°æ®åº“çš„æ”¯æŒï¼ŒOpenGL|ESåº“æä¾›äº†3Dç»˜å›¾çš„æ”¯æŒï¼ŒWebKitåº“æä¾›äº†æµè§ˆå™¨å†…æ ¸çš„æ”¯æŒç­‰ç­‰ã€‚åŒæ—¶åœ¨è¿™ä¸€å±‚çš„è¿˜æœ‰Androidè¿è¡Œæ—¶åº“æä¾›äº†ä¸€äº›æ ¸å¿ƒåº“ï¼Œèƒ½å¤Ÿå…è®¸å¼€å‘è€…ä½¿ç”¨JAVAè¯­è¨€æ¥ç¼–å†™Androidåº”ç”¨ã€‚è¿˜åŒ…å«äº†è™šæ‹ŸæœºDalvikä½†ä¹‹åæ”¹ä¸ºäº†ARTè¿è¡Œç¯å¢ƒï¼Œä½¿æ¯ä¸€ä¸ªAndroidåº”ç”¨éƒ½æœ‰è‡ªå·±çš„è¿›ç¨‹ï¼Œå¹¶ä¸”éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„Dalvikè™šæ‹Ÿæœºå®ä¾‹ï¼Œç›¸è¾ƒäºJAVAçš„è™šæ‹Ÿæœºï¼ŒDalvikæ˜¯ä¸“é—¨ä¸ºç§»åŠ¨è®¾å¤‡å®šåˆ¶çš„ï¼Œé’ˆå¯¹å†…å­˜å’ŒCPUæ€§èƒ½éƒ½æœ‰äº†ä¼˜åŒ–ã€‚

Androidçš„ç³»ç»Ÿè¿è¡Œåº“åŒ…å«ä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ªæ˜¯ç³»ç»Ÿåº“ï¼Œå¦ä¸€ä¸ªæ˜¯è¿è¡Œæ—¶ã€‚

### Linuxå†…æ ¸å±‚

Androidç³»ç»Ÿæ˜¯åŸºäºLinuxå†…æ ¸çš„ï¼Œè¿™ä¸€å±‚ä¸ºAndroidè®¾å¤‡çš„å„ç§ç¡¬ä»¶æä¾›äº†åº•å±‚çš„é©±åŠ¨ï¼ˆå¦‚æ˜¾ç¤ºï¼ŒéŸ³é¢‘ï¼Œç…§ç›¸æœºï¼Œè“ç‰™ï¼ŒWI-FIï¼Œç”µæºç®¡ç†ç­‰ç­‰ï¼‰

å…³äºå†…æ ¸çš„ä½œç”¨ç®€å•è¯´å°±æ˜¯æä¾›äº†è¿›ç¨‹ç®¡ç†ã€æ–‡ä»¶ç½‘ç»œç®¡ç†ã€ç³»ç»Ÿå®‰å…¨æƒé™ç®¡ç†ã€ä»¥åŠç³»ç»Ÿä¸ç¡¬ä»¶è®¾å¤‡é€šè®¯åŸºç¡€ã€‚è€Œåœ¨æ— è®ºAndroidè¿˜æ˜¯iOSè¿™ç±»é«˜åº¦ä¾èµ–æ¡†æ¶çš„å¤šå±‚æ¬¡æ“ä½œç³»ç»Ÿä¸Šï¼Œå†…æ ¸å¯¹ä¸Šå±‚å¼€å‘è€…æ¥è¯´æ˜¯å‡ ä¹ä¸å¯è§çš„ï¼Œåªèƒ½é€šè¿‡å¼€æ”¾ç»™ä½ çš„æ¡†æ¶æ¥å£è¿›è¡Œç›¸å…³æ“ä½œã€‚

## Androidå¼€å‘åˆ†ç±»

åŸç”ŸAPPå¼€å‘

æ··åˆå¼€å‘ï¼ˆHybrid APPï¼‰

ç‰¹ç‚¹ï¼šä¸Html5æ··åˆï¼ŒHtml5å’ŒAndroidä¹‹é—´äº§ç”Ÿäº¤äº’ï¼Œå½“å‰çš„ä¸»æµæ–¹å¼

## Androidé¡¹ç›®ç»“æ„

åœ¨Android Studioä¸­è®¾ç½®é¡¹ç›®ç»“æ„æ˜¾ç¤ºä¸ºAndroid

![image-20230504173426445](./assets/index/image-20230504173426445.png)

å¯ä»¥çœ‹åˆ°é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

![image-20230504173535681](./assets/index/image-20230504173535681.png)

å…¶ä¸»è¦ç›®å½•å¦‚ä¸‹ï¼š

- app
  - manifests(d)
    - AndroidManifest.xml - é¡¹ç›®çš„é…ç½®ä¿¡æ¯æ–‡ä»¶,åº”ç”¨ç¨‹åºåç§°ï¼Œæƒé™å£°æ˜ï¼Œç»„ä»¶å£°æ˜ç­‰
  - java(d) - javaæºç ,åŒ…æ‹¬åº”ç”¨ç¨‹åºçš„Activityï¼ŒServiceå’ŒBroadcastReceiverç­‰ç»„ä»¶ã€‚
  - res(d)
    - anim(d) - xml æ ¼å¼çš„åŠ¨ç”»èµ„æº
    - drawable(d) - å­˜æ”¾å›¾å½¢èµ„æºçš„ç›®å½•
    - layout(d) - å¸ƒå±€æ–‡ä»¶ç›®å½•
      - activity_main.xml
    - mipmap(d) - å­˜æ”¾åº”ç”¨ç¨‹åºå›¾æ ‡èµ„æºçš„ç›®å½•
      - drawable-xhdpi - 96 Ã— 96
      - drawable-hdpi - 72 Ã— 72
      - drawable-mdpi - 48 Ã— 48
      - drawable-ldpi - 36 Ã— 36
    - values(d) - å­˜æ”¾åº”ç”¨ç¨‹åºèµ„æºå€¼çš„ç›®å½•ï¼Œç”¨äºå­˜æ”¾å„ç§å­—ç¬¦ä¸²ã€é¢œè‰²ã€å°ºå¯¸ç­‰ä¸åº”ç”¨ç¨‹åºUIç›¸å…³çš„å€¼
      - colors.xml
      - strings.xml
      - themes(d) - è‡ªå®šä¹‰ä¸»é¢˜
    - xml(d) - å­˜æ”¾å„ç§XMLæ–‡ä»¶çš„ç›®å½•ï¼Œå¦‚å¸ƒå±€æ–‡ä»¶ã€èœå•æ–‡ä»¶ã€åŠ¨ç”»æ–‡ä»¶ã€æ ·å¼æ–‡ä»¶
  - assets(d) - å¯ä»¥å­˜æ”¾ä»»æ„èµ„æºï¼Œä¸ä¼šè¢«ç¼–è¯‘

# ç¬¬äºŒç«  ç”¨æˆ·ç•Œé¢è®¾è®¡

## ç»„ä»¶åŒ…widget å’Œ Viewç±»

### å¸¸è§ç»„ä»¶ğŸ

| **å¯è§†åŒ–ç»„ä»¶**   | **è¯´æ˜**                                               |
| ---------------- | ------------------------------------------------------ |
| **Button**       | **æŒ‰é’®**                                               |
| **CalendarView** | **æ—¥å†è§†å›¾**                                           |
| **CheckBox**     | **å¤é€‰æ¡†**                                             |
| **EditText**     | **å¯ç¼–è¾‘çš„æ–‡æœ¬è¾“å…¥æ¡†**                                 |
| **ImageView**    | **æ˜¾ç¤ºå›¾åƒæˆ–å›¾æ ‡ï¼Œå¹¶æä¾›ç¼©æ”¾ã€ç€è‰²ç­‰å„ç§å›¾åƒå¤„ç†æ–¹æ³•** |
| **ListView**     | **åˆ—è¡¨æ¡†è§†å›¾**                                         |
| **MapView**      | **åœ°å›¾è§†å›¾****                                         |
| **RadioGroup**   | **å•é€‰æŒ‰é’®ç»„ä»¶**                                       |
| **Spinner**      | **ä¸‹æ‹‰åˆ—è¡¨**                                           |
| **TextView**     | **æ–‡æœ¬æ ‡ç­¾**                                           |
| **WebView**      | **ç½‘é¡µæµè§ˆå™¨è§†å›¾**                                     |
| **Toast**        | **æ¶ˆæ¯æç¤º**                                           |

Viewæ˜¯ç”¨æˆ·ç•Œé¢ç»„ä»¶çš„å…±åŒçˆ¶ç±»ï¼Œå‡ ä¹æ‰€æœ‰çš„ç”¨æˆ·ç•Œé¢ç»„ä»¶éƒ½æ˜¯ç»§æ‰¿Viewç±»è€Œå®ç°çš„ï¼Œå¦‚TextViewã€Buttonã€EditTextç­‰ã€‚ 

å¯¹Viewç±»åŠå…¶å­ç±»çš„å±æ€§è¿›è¡Œè®¾ç½®ï¼Œå¯ä»¥åœ¨å¸ƒå±€æ–‡ä»¶XMLä¸­è®¾ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æˆå‘˜æ–¹æ³•åœ¨Javaä»£ç æ–‡ä»¶ä¸­åŠ¨æ€è®¾ç½®ã€‚

ç»„ä»¶å¤§å°å•ä½ï¼š

- pxï¼ˆåƒç´ ï¼‰ï¼šæ˜¯å±å¹•ä¸Šçš„æœ€å°å•ä½ï¼Œé€šå¸¸ç”¨äºæè¿°å±å¹•åˆ†è¾¨ç‡æˆ–å›¾åƒå¤§å°ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ px æ¥æŒ‡å®šè§†å›¾çš„å¤§å°å’Œä½ç½®ã€‚

- dpiï¼ˆæ¯è‹±å¯¸ç‚¹æ•°ï¼‰ï¼šæ˜¯æ˜¾ç¤ºå™¨æ¯è‹±å¯¸ä¸Šçš„åƒç´ æ•°é‡ã€‚é€šå¸¸ç”¨äºæè¿°è®¾å¤‡çš„å±å¹•å¯†åº¦ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ dpi æ¥æŒ‡å®šèµ„æºçš„å°ºå¯¸ï¼Œä¾‹å¦‚å›¾æ ‡å’Œå›¾ç‰‡ã€‚

- dpï¼ˆå¯†åº¦æ— å…³åƒç´ ï¼‰ï¼šæ˜¯ä¸€ç§æŠ½è±¡çš„å•ä½ï¼Œç”¨äºæè¿°åœ¨ä¸åŒå±å¹•å¯†åº¦ä¸‹çš„è§†å›¾å¤§å°å’Œä½ç½®ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ dp æ¥æŒ‡å®šè§†å›¾çš„å¤§å°å’Œä½ç½®ï¼Œä»¥ç¡®ä¿åœ¨ä¸åŒå±å¹•å¯†åº¦ä¸‹ä¿æŒä¸€è‡´ã€‚

- spï¼ˆå¯ç¼©æ”¾åƒç´ ï¼‰ï¼šä¸ dp ç±»ä¼¼ï¼Œä½†å®ƒè¿˜è€ƒè™‘äº†ç”¨æˆ·çš„å­—ä½“å¤§å°åå¥½ã€‚åœ¨ Android å¼€å‘ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ sp æ¥æŒ‡å®šæ–‡æœ¬çš„å¤§å°ï¼Œä»¥ç¡®ä¿åœ¨ä¸åŒå±å¹•å¯†åº¦å’Œç”¨æˆ·å­—ä½“å¤§å°åå¥½ä¸‹ä¿æŒä¸€è‡´ã€‚

### å¸¸è§ç»„ä»¶çš„æ–¹æ³•å’Œå±æ€§

#### Viewç±»

å±æ€§

| å± æ€§              | å¯¹ åº” æ–¹ æ³•                       | è¯´  æ˜                                               |
| ---------------------- | ------------------------------------- | -------------------------------------------------------- |
| android:background | setBackgroundColor(int color) | è®¾ç½®èƒŒæ™¯é¢œè‰²                                         |
| android:id         | setId(int)                    | ä¸ºç»„ä»¶è®¾ç½®å¯é€šè¿‡findViewByIdæ–¹æ³•è·å–çš„æ ‡è¯†ç¬¦ |
| android:alpha      | setAlpha(float)               | è®¾ç½®é€æ˜åº¦ï¼Œå–å€¼[0ï¼Œ1]ä¹‹é—´           |
|                        | findViewById(int id)          | ä¸idæ‰€å¯¹åº”çš„ç»„ä»¶å»ºç«‹å…³è”                     |
| android:visibility | setVisibility(int)            | è®¾ç½®ç»„ä»¶çš„å¯è§æ€§                                     |
| android:clickable  | setClickable(boolean) | è®¾ç½®ç»„ä»¶æ˜¯å¦å“åº”å•å‡»äº‹ä»¶                             |

#### TextViewğŸ

æ–¹æ³•

| **æ–¹   æ³•**                     | **åŠŸ   èƒ½**                |
| ------------------------------- | -------------------------- |
| **getText**();                  | **è·å–æ–‡æœ¬æ ‡ç­¾çš„æ–‡æœ¬å†…å®¹** |
| **setText(CharSequence text);** | **è®¾ç½®æ–‡æœ¬æ ‡ç­¾çš„æ–‡æœ¬å†…å®¹** |
| **setTextSize(float);**         | **è®¾ç½®æ–‡æœ¬æ ‡ç­¾çš„æ–‡æœ¬å¤§å°** |
| **setTextColor(int color);**    | **è®¾ç½®æ–‡æœ¬æ ‡ç­¾çš„æ–‡æœ¬é¢œè‰²** |

å±æ€§

| **å…ƒ ç´  å± æ€§**           | **è¯´   æ˜**                                                  |
| ------------------------- | ------------------------------------------------------------ |
| **android:id**            | **æ–‡æœ¬æ ‡ç­¾æ ‡è¯†**                                             |
| **android:layout_width**  | **æ–‡æœ¬æ ‡ç­¾**TextViewçš„å®½åº¦ï¼Œé€šå¸¸å–å€¼"fill_parent"ï¼ˆå±å¹•å®½åº¦ï¼‰æˆ–ä»¥åƒç´ ä¸ºå•ä½ptçš„å›ºå®šå€¼ |
| **android:layout_height** | **æ–‡æœ¬æ ‡ç­¾**TextViewçš„é«˜åº¦ï¼Œé€šå¸¸å–å€¼" **wrap_content** "ï¼ˆæ–‡æœ¬çš„é«˜ï¼‰æˆ–ä»¥åƒç´ pä¸ºå•ä½çš„å›ºå®šå€¼ |
| **android:text**          | **æ–‡æœ¬æ ‡ç­¾**TextViewçš„æ–‡æœ¬å†…å®¹                               |
| **android:textSize**      | **æ–‡æœ¬æ ‡ç­¾**TextViewçš„æ–‡æœ¬å¤§å°                               |

#### ButtonğŸ

| æ–¹æ³•                 | è¯´æ˜           |
| -------------------- | -------------- |
| setOnClickListener() | è®¾ç½®ç‚¹å‡»ç›‘å¬å™¨ |
| setClickable()       | è®¾ç½®æ˜¯å¦å¯ç‚¹å‡» |
| setEnabled()         | è®¾ç½®æ˜¯å¦å¯ç”¨   |

setOnClickListener()ç¤ºä¾‹

```java
Button button;
button.setOnClickListener((v)->{
	// vå°±æ˜¯buttonå¯¹è±¡è‡ªå·±
});
```

#### EditTextğŸ

æ–¹æ³•

| **æ–¹æ³•**                       | **åŠŸèƒ½**                         |
| ------------------------------ | -------------------------------- |
| **EditText**(Context context)  | **æ„é€ æ–¹æ³•ï¼Œåˆ›å»ºæ–‡æœ¬ç¼–è¾‘æ¡†å¯¹è±¡** |
| **getText**()                  | **è·å–æ–‡æœ¬ç¼–è¾‘æ¡†çš„æ–‡æœ¬å†…å®¹**     |
| **setText(CharSequence text)** | **è®¾ç½®æ–‡æœ¬ç¼–è¾‘æ¡†çš„æ–‡æœ¬å†…å®¹**     |

å±æ€§

| **å…ƒç´ å±æ€§**            | **è¯´æ˜**                                            |
| ----------------------- | --------------------------------------------------- |
| **android:editable**    | è®¾ç½®æ˜¯å¦å¯ç¼–è¾‘ï¼Œå…¶å€¼ä¸ºâ€œtrueâ€æˆ–â€œfalseâ€               |
| **android:numeric**     | **è®¾ç½®**TextViewåªèƒ½è¾“å…¥æ•°å­—ï¼Œå…¶å‚æ•°é»˜è®¤å€¼ä¸ºå‡      |
| **android:password**    | è®¾ç½®å¯†ç è¾“å…¥ï¼Œå­—ç¬¦æ˜¾ç¤ºä¸ºåœ†ç‚¹ï¼Œå…¶å€¼ä¸ºâ€œtrueâ€æˆ–â€œfalseâ€ |
| **android:phoneNumber** | **è®¾ç½®åªèƒ½è¾“å…¥ç”µè¯å·ç ï¼Œå…¶å€¼ä¸ºâ€œ**trueâ€æˆ–â€œfalseâ€     |

#### CheckBox

| **æ–¹   æ³•**     | **åŠŸ   èƒ½**                |
| --------------- | -------------------------- |
| **isChecked**() | **åˆ¤æ–­é€‰é¡¹æ˜¯å¦è¢«é€‰ä¸­**     |
| **getText**()   | **è·å–å¤é€‰æŒ‰é’®çš„æ–‡æœ¬å†…å®¹** |

#### ProgressBar

| **å±   æ€§**          | **æ–¹   æ³•**                   | **åŠŸ   èƒ½**                      |
| -------------------- | ----------------------------- | -------------------------------- |
| **android:max**      | setMax(int max)               | **è®¾ç½®è¿›åº¦æ¡çš„å˜åŒ–èŒƒå›´ä¸º0ï½max   |
| **android:progress** | setProgress(int progress)     | **è®¾ç½®è¿›åº¦æ¡çš„å½“å‰å€¼ï¼ˆåˆå§‹å€¼ï¼‰** |
|                      | incrementProgressBy(int diff) | **è¿›åº¦æ¡çš„å˜åŒ–æ­¥é•¿å€¼**           |

#### ~~ImageView~~

| å…ƒç´ å±æ€§          | å¯¹åº”æ–¹æ³•                                      | è¯´   æ˜                                        |
| --------------------- | ------------------------------------------------- | -------------------------------------------------- |
| android:maxHeight | setMaxHeight(int)                         | ä¸ºæ˜¾ç¤ºå›¾åƒæä¾›æœ€å¤§é«˜åº¦çš„å¯é€‰å‚æ•°ã€‚             |
| android:maxWidth  | setMaxWidth(int)                          | ä¸ºæ˜¾ç¤ºå›¾åƒæä¾›æœ€å¤§å®½åº¦çš„å¯é€‰å‚æ•°ã€‚             |
| android:scaleType | setScaleType(ImageView.ScaleType) | æ§åˆ¶å›¾åƒé€‚åˆ ImageViewå¤§å°çš„æ˜¾ç¤ºæ–¹å¼ã€‚ |
| android:src       | setImageResource(int)                     | è®¾ç½®å›¾åƒæ–‡ä»¶è·¯å¾„                               |

~~scaleTypeå±æ€§å€¼å¸¸é‡~~

| scaleTypeå±æ€§å€¼å¸¸é‡ | å€¼   | è¯´    æ˜                                                     |
| ------------------- | ---- | ------------------------------------------------------------ |
| matrix              | 0    | ç”¨çŸ©é˜µæ¥ç»˜å›¾ã€‚                                               |
| fitXY               | 1    | æ‹‰ä¼¸å›¾ç‰‡ï¼ˆä¸æŒ‰å®½é«˜æ¯”ä¾‹ï¼‰ä»¥å¡«å……Viewçš„å®½é«˜ã€‚                   |
| fitStart            | 2    | æŒ‰æ¯”ä¾‹æ‹‰ä¼¸å›¾ç‰‡ï¼Œæ‹‰ä¼¸åå›¾ç‰‡çš„é«˜åº¦ä¸ºViewçš„é«˜åº¦ï¼Œä¸”æ˜¾ç¤ºåœ¨Viewçš„å·¦è¾¹ã€‚ |
| fitCenter           | 3    | æŒ‰æ¯”ä¾‹æ‹‰ä¼¸å›¾ç‰‡ï¼Œæ‹‰ä¼¸åå›¾ç‰‡çš„é«˜åº¦ä¸ºViewçš„é«˜åº¦ï¼Œä¸”æ˜¾ç¤ºåœ¨Viewçš„ä¸­é—´ã€‚ |
| fitEnd              | 4    | æŒ‰æ¯”ä¾‹æ‹‰ä¼¸å›¾ç‰‡ï¼Œæ‹‰ä¼¸åå›¾ç‰‡çš„é«˜åº¦ä¸ºViewçš„é«˜åº¦ï¼Œä¸”æ˜¾ç¤ºåœ¨Viewçš„å³è¾¹ã€‚ |
| center              | 5    | æŒ‰åŸå›¾å¤§å°æ˜¾ç¤ºå›¾ç‰‡ï¼Œä½†å›¾ç‰‡å®½é«˜å¤§äºViewçš„å®½é«˜æ—¶ï¼Œæˆªå›¾å›¾ç‰‡ä¸­é—´éƒ¨åˆ†æ˜¾ç¤ºã€‚ |
| centerCrop          | 6    | æŒ‰æ¯”ä¾‹æ”¾å¤§åŸå›¾ç›´è‡³ç­‰äºæŸè¾¹Viewçš„å®½é«˜æ˜¾ç¤ºã€‚                   |
| centerInside        | 7    | å½“åŸå›¾å®½é«˜æˆ–ç­‰äºViewçš„å®½é«˜æ—¶ï¼ŒæŒ‰åŸå›¾å¤§å°å±…ä¸­æ˜¾ç¤ºï¼›åä¹‹å°†åŸå›¾ç¼©æ”¾è‡³Viewçš„å®½é«˜å±…ä¸­æ˜¾ç¤ºã€‚ |

#### ToastğŸ

å¯ä»¥ç”¨Toastæ¥æ˜¾ç¤ºå¸®åŠ©æˆ–æç¤ºæ¶ˆæ¯ã€‚

~~æ–¹æ³•~~

| **å¯¹åº”æ–¹æ³•**                                               | **è¯´   æ˜**                                                  |
| ---------------------------------------------------------- | ------------------------------------------------------------ |
| Toast(Context context)                                     | Toastçš„æ„é€ æ–¹æ³•ï¼Œæ„é€ ä¸€ä¸ªç©ºçš„Toastå¯¹è±¡ã€‚                     |
| makeText(Context context, CharSequence text, int duration) | ä»¥ç‰¹å®šæ—¶é•¿æ˜¾ç¤ºæ–‡æœ¬å†…å®¹ï¼Œå‚æ•°textä¸ºæ˜¾ç¤ºçš„æ–‡æœ¬ï¼Œå‚æ•°durationä¸ºæ˜¾ç¤ºæ—¶é—´ï¼Œè¾ƒé•¿æ—¶é—´å–å€¼LENGTH_LONGï¼Œè¾ƒçŸ­æ—¶é—´å–å€¼LENGTH_SHORTã€‚ |
| getView( )                                                 | è¿”å›è§†å›¾ã€‚                                                   |
| setDuration(int duration)                                  | è®¾ç½®å­˜ç»­æ—¶é—´ã€‚                                               |
| setView(View view)                                         | è®¾ç½®è¦æ˜¾ç¤ºçš„è§†å›¾ã€‚                                           |
| setGravity(int gravity, int xOffset, int yOffset)          | è®¾ç½®æç¤ºä¿¡æ¯åœ¨å±å¹•ä¸Šçš„æ˜¾ç¤ºä½ç½®ã€‚                             |
| setText(int resId)                                         | æ›´æ–°makeTextï¼ˆï¼‰æ–¹æ³•çš„æ‰€è®¾ç½®çš„æ–‡æœ¬å†…å®¹ã€‚                     |
| show( )                                                    | æ˜¾ç¤ºæç¤ºä¿¡æ¯ã€‚                                               |
| LENGTH_LONG                                                | æç¤ºä¿¡æ¯æ˜¾ç¤ºè¾ƒé•¿æ—¶é—´çš„å¸¸é‡ã€‚                                 |
| LENGTH_SHORT                                               | æç¤ºä¿¡æ¯æ˜¾ç¤ºè¾ƒçŸ­æ—¶é—´çš„å¸¸é‡ã€‚                                 |

ç¤ºä¾‹ğŸ

```java
Toast.makeText(this,"hello",Toast.LENGTH_LONG).show();
```

#### ListView ğŸ

é€‚é…å™¨è¦ç”¨åˆ°çš„ç»„ä»¶ï¼Œé‡è¦

| å¯¹åº”æ–¹æ³•                                                     | è¯´   æ˜                                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| ListView(Context context)                                    | æ„é€ æ–¹æ³•                                                     |
| setAdapter(ListAdapter adapter)                              | è®¾ç½®æä¾›æ•°ç»„é€‰é¡¹çš„é€‚é…å™¨                                     |
| addHeaderView(View v)                                        | è®¾ç½®åˆ—è¡¨é¡¹ç›®çš„å¤´éƒ¨                                           |
| addFooterView(View v)                                        | è®¾ç½®åˆ—è¡¨é¡¹ç›®çš„åº•éƒ¨                                           |
| setOnItemClickListener(AdapterView.OnItemClickListener listener) | æ³¨å†Œå•å‡»é€‰é¡¹æ—¶æ‰§è¡Œçš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç»§æ‰¿äºçˆ¶ç±»android.widget.AdapterViewã€‚ |



## å¸ƒå±€ç®¡ç†

å¸ƒå±€æœ‰`LinearLayout`-çº¿æ€§å¸ƒå±€ã€`FrameLayout`-æ¡†æ¶å¸ƒå±€ã€`TableLayout`-è¡¨æ ¼å¸ƒå±€ã€`RelativeLayout`-ç›¸å¯¹å¸ƒå±€ã€`GridLayout`-ç½‘æ ¼å¸ƒå±€ã€‚ 

### LinearLayoutï¼ˆçº¿æ€§å¸ƒå±€ï¼‰ğŸ

è¯¥å¸ƒå±€æŒ‰ç…§æ°´å¹³æˆ–å‚ç›´æ–¹å‘æ’åˆ—å­è§†å›¾ã€‚

```xml
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <!-- å­è§†å›¾ -->
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hello, LinearLayout!" />

</LinearLayout>
```

é‡è¦å±æ€§ï¼š

- `android:orientation`ï¼šæŒ‡å®šå¸ƒå±€çš„æ–¹å‘ï¼Œå¯ä»¥æ˜¯"**horizontal**"ï¼ˆæ°´å¹³ï¼‰æˆ–"**vertical**"ï¼ˆå‚ç›´ï¼‰ã€‚

- åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œç”± â€œandroid:gravityâ€ å±æ€§æ§åˆ¶ç»„ä»¶çš„å¯¹é½æ–¹å¼ï¼Œå…¶å±æ€§å€¼æœ‰ï¼š

  ä¸Šï¼ˆtopï¼‰ã€

  ä¸‹ï¼ˆbottomï¼‰ã€

  å·¦ï¼ˆletfï¼‰ã€

  å³ï¼ˆrightï¼‰ã€

  æ°´å¹³æ–¹å‘å±…ä¸­ï¼ˆcenter_horizontalï¼‰ã€

  å‚ç›´æ–¹å‘å±…ä¸­ï¼ˆcenter_verticalï¼‰

çº¿æ€§å¸ƒå±€åµŒå¥—å¯ä»¥å®ç°å¾ˆå¤šå¸ƒå±€æ•ˆæœ

### FrameLayoutï¼ˆå¸§å¸ƒå±€ï¼‰

è¯¥å¸ƒå±€å…è®¸å­è§†å›¾é‡å åœ¨åŒä¸€ä¸ªä½ç½®ï¼Œé€šè¿‡æ§åˆ¶å®ƒä»¬çš„å¯è§æ€§æ¥æ˜¾ç¤ºç‰¹å®šçš„è§†å›¾ã€‚

```xml
xmlCopy code<FrameLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/image1" />

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:src="@drawable/image2"
        android:visibility="gone" />

</FrameLayout>
```

é‡è¦å±æ€§ï¼š

- `android:visibility`ï¼šæŒ‡å®šè§†å›¾çš„å¯è§æ€§ï¼Œå¯ä»¥æ˜¯"visible"ï¼ˆå¯è§ï¼‰ã€"invisible"ï¼ˆä¸å¯è§ï¼Œä½†ä»å ç”¨ç©ºé—´ï¼‰æˆ–"gone"ï¼ˆä¸å¯è§ä¸”ä¸å ç”¨ç©ºé—´ï¼‰ã€‚

### TableLayoutï¼ˆè¡¨æ ¼å¸ƒå±€ï¼‰ğŸ

è¯¥å¸ƒå±€ä»¥è¡¨æ ¼çš„å½¢å¼æ’åˆ—å­è§†å›¾ï¼Œå…·æœ‰è¡Œå’Œåˆ—çš„ç»“æ„ã€‚

```xml
<TableLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:shrinkColumns="0,1">
    <TableRow>
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cell 1" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cell 2" />
    </TableRow>

    <TableRow>
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cell 3" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cell 4" />
    </TableRow>

</TableLayout>
```

é‡è¦å±æ€§ï¼š

- android:shrinkColumns: æŒ‡å®šåˆ—æ•°
-  `</TableRow>` æŒ‡å®šè¡Œ

### RelativeLayoutï¼ˆç›¸å¯¹å¸ƒå±€ï¼‰

è¯¥å¸ƒå±€å…è®¸å­è§†å›¾ç›¸å¯¹äºå…¶ä»–è§†å›¾æˆ–çˆ¶è§†å›¾è¿›è¡Œå®šä½ã€‚

```xml
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent">


    <Button
    	android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/text_view1"
        android:text="Button" 
        android:layout_alignParentLeft="true"/>
    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button"
        android:text="Button" />
</RelativeLayout>
```

é‡è¦å±æ€§ï¼š

- `android:layout_alignParentLeft:` ç›¸å¯¹äºçˆ¶å…ƒç´ çš„ä½ç½®å€¼ä¸ºtrueæˆ–falseï¼Œå¯¹åº”è¿˜æœ‰`layout_alignParentTop`,`layout_alignParentRight`,`layout_alignParentBottom`,`layout_centerInParent`
- `layout_below`: ç›¸å¯¹äºæŸä¸ªidçš„ä¸Šæ–¹ï¼Œå¯¹åº”è¿˜æœ‰`layout_below`ï¼Œ`layout_toRightOf`,`layout_toLeftOf`

### GridLayoutï¼ˆç½‘æ ¼å¸ƒå±€ï¼‰

è¯¥å¸ƒå±€ä»¥ç½‘æ ¼çš„å½¢å¼æ’åˆ—å­è§†å›¾ï¼Œå…·æœ‰è¡Œå’Œåˆ—çš„ç»“æ„ã€‚

```xml
xmlCopy code<GridLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:rowCount="2"
    android:columnCount="2">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button 1" 
        layout_columnSpan="2"
        layout_rowSpan="2"/>
    
</GridLayout>
```

#### é‡è¦å±æ€§ï¼š

- `android:rowCount`ï¼šæŒ‡å®šç½‘æ ¼çš„è¡Œæ•°ã€‚
- `android:columnCount`ï¼šæŒ‡å®šç½‘æ ¼çš„åˆ—æ•°ã€‚
- `layout_columnSpan`:è®¾ç½®ç»„ä»¶å æ®åˆ—æ•°
- `layout_rowSpan`:è®¾ç½®ç»„ä»¶å æ®è¡Œæ•°

# å¤šç•Œé¢

## æ´»åŠ¨ä¹‹é—´çš„æ•°æ®ä¼ é€’ğŸ

`MainActivity`-->`MainActivity2`-->`MainActivity`çš„æ•°æ®ä¼ é€’

`MainActivity`:

```java
package com.example.demo;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Button;
import android.widget.Toast;
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);// å°†Activityå’Œå¸ƒå±€å…³è”
        Button button = findViewById(R.id.main_buttom);
        button.setOnClickListener(view -> {
            Bundle bundle = new Bundle();// åˆ›å»ºBudle
            bundle.putString("key","String");// æ”¾å…¥æ•°æ®
            Intent intent = new Intent();//åˆ›å»ºIntent
            intent.setClass(this,MainActivity2.class);// å…³è”æ´»åŠ¨
            intent.putExtra("bundle",bundle);// æ”¾å…¥æ•°æ®
            // ä¹Ÿå¯ä»¥ç›´æ¥æ”¾å…¥æ•°æ®
            intent.putExtra("key2","String2");
            startActivity(intent); //è·³è½¬,æ²¡æœ‰è¿”å›ç»“æœ
            //startActivityForResult(intent,1);// æœ‰è¿”å›ç»“æœ
        });
    }
    @Override
    protected void onRestart() {
        super.onRestart();
        // é‡æ–°å¯åŠ¨æ—¶çš„ä»£ç 
    }

    @Override
    public void onBackPressed() {
        // å‰é¢å†™ä»£ç 
        super.onBackPressed();
    }

    @Override
    protected void onResume() {
        super.onResume();
        // ç¨‹åºé‡æ–°è¿›å…¥çš„ä»£ç 
    }
    // è·å–è¿”å›ç»“æœ
    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        switch (requestCode) {
            case 1:
                if (resultCode == RESULT_OK) {
                    String s = data.getStringExtra("return");
                    Toast.makeText(this, s, Toast.LENGTH_SHORT).show();
                }
                break;
            default:
                break;
        }
    }
}
```

`MainActivity2`

```java
package com.example.demo;
import androidx.appcompat.app.AppCompatActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;
public class MainActivity2 extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);
        Intent intent = getIntent();
        String s = intent.getBundleExtra("bundle").getString("key");// è·å–bundleçš„æ•°æ®
        String s2 = intent.getStringExtra("key2");// ç›´æ¥è·å–intentçš„æ•°æ®
        Toast.makeText(this,s,Toast.LENGTH_SHORT).show();
        Toast.makeText(this,s2,Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onBackPressed() {
        Intent intent = new Intent();
        intent.putExtra("return","hello");
        setResult(RESULT_OK,intent);// è®¾ç½®è¿”å›ç»“æœ
        super.onBackPressed();// è¿”å›
    }
}
```

## èœå•

Activityæœ‰è¿™äº›æ–¹æ³•å¯ä»¥åˆ«é‡å†™ä»¥æ“æ§èœå•ï¼š

| **æ–¹   æ³•**                           | **è¯´   æ˜**                              |
| ------------------------------------- | ---------------------------------------- |
| onCreateOptionMenu(Menu menu)         | ç”¨äºåˆå§‹åŒ–èœå•ï¼Œmenuä¸ºMenuå¯¹è±¡å®ä¾‹ã€‚     |
| onPrepareOptionsMenu(Menu menu)       | æ”¹å˜èœå•çŠ¶æ€ï¼Œåœ¨èœå•æ˜¾ç¤ºå‰è°ƒç”¨ã€‚         |
| onOptionsMenuClosed(Menu menu)        | èœå•è¢«å…³é—­æ—¶è°ƒç”¨ã€‚                       |
| onOptionsItemSelected(MenuItem  item) | èœå•é¡¹è¢«ç‚¹å‡»æ—¶è°ƒç”¨ï¼Œå³èœå•é¡¹çš„ç›‘å¬æ–¹æ³•ã€‚ |

ç¤ºä¾‹ï¼š

```java
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        menu.add(1,1,1,"hello1");// æ·»åŠ èœå•
        return super.onCreateOptionsMenu(menu);
    }
	// èœå•ç‚¹å‡»äº‹ä»¶ï¼Œåœ¨è¿™é‡Œä¼šè¾“å‡ºhello1
    @Override
    public boolean onOptionsItemSelected(@NonNull MenuItem item) {
        Toast.makeText(this,item.getTitle(),Toast.LENGTH_SHORT).show();
        return super.onOptionsItemSelected(item);
    }
}
```

## å¯¹è¯æ¡†

### æ¶ˆæ¯å¯¹è¯æ¡†ğŸ

| **æ–¹   æ³•**                  | **è¯´   æ˜**                 |
| ---------------------------- | --------------------------- |
| AlertDialog.Builder(Context) | å¯¹è¯æ¡†Builderå¯¹è±¡çš„æ„é€ æ–¹æ³• |
| create();                    | åˆ›å»ºAlertDialogå¯¹è±¡         |
| setTitle();                  | è®¾ç½®å¯¹è¯æ¡†æ ‡é¢˜              |
| setIcon();                   | è®¾ç½®å¯¹è¯æ¡†å›¾æ ‡              |
| setMessage();                | è®¾ç½®å¯¹è¯æ¡†çš„æç¤ºä¿¡æ¯        |
| setItems();                  | è®¾ç½®å¯¹è¯æ¡†è¦æ˜¾ç¤ºçš„ä¸€ä¸ªlist  |
| setPositiveButton();         | åœ¨å¯¹è¯æ¡†ä¸­æ·»åŠ "yes"æŒ‰é’®     |
| setNegativeButton();         | åœ¨å¯¹è¯æ¡†ä¸­æ·»åŠ "no"æŒ‰é’®      |
| show();                      | æ˜¾ç¤ºå¯¹è¯æ¡†                  |
| dismiss();                   | å…³é—­å¯¹è¯æ¡†                  |

ç¤ºä¾‹ï¼š

```java
public class MainActivity extends AppCompatActivity {
    private AlertDialog alert = null;
    private AlertDialog.Builder builder = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);// å°†Activityå’Œå¸ƒå±€å…³è”
        Button button = findViewById(R.id.main_buttom);

        button.setOnClickListener(view -> {
            alert = null;
            builder = new AlertDialog.Builder(this);// æ„å»ºå™¨
            alert = builder
                    .setTitle("æç¤ºï¼š")
                    .setMessage("ä½ ç‚¹å‡»äº†æŒ‰é’®")
                    .setPositiveButton("ç¡®å®š", (dialog, which) -> {})
                    .create();// åˆ›å»ºå¯¹è¯æ¡†
            alert.show();
        });
    }
}
```

### è¿›åº¦æ¡å¯¹è¯æ¡†

| æ–¹   æ³•                                                      | è¯´   æ˜                    |
| ------------------------------------------------------------ | -------------------------- |
| getMax()                                                     | è·å–å¯¹è¯æ¡†è¿›åº¦çš„æœ€å¤§å€¼     |
| getProgress()                                                | è·å–å¯¹è¯æ¡†å½“å‰è¿›åº¦å€¼       |
| onStart()                                                    | å¼€å§‹è°ƒç”¨å¯¹è¯æ¡†             |
| setMax(int max)                                              | è®¾ç½®å¯¹è¯æ¡†è¿›åº¦çš„æœ€å¤§å€¼     |
| setMessage(CharSequence message)                             | è®¾ç½®å¯¹è¯æ¡†çš„æ–‡æœ¬å†…å®¹       |
| setProgress(int value)                                       | è®¾ç½®å¯¹è¯æ¡†å½“å‰è¿›åº¦         |
| show(Context context,  CharSequence title, CharSequence message) | è®¾ç½®å¯¹è¯æ¡†çš„æ˜¾ç¤ºå†…å®¹å’Œæ–¹å¼ |
| ProgressDialog(Context context)                              | å¯¹è¯æ¡†çš„æ„é€ æ–¹æ³•           |

### æ—¥æœŸé€‰æ‹©å¯¹è¯æ¡†

| **æ–¹   æ³•**                                                  | **è¯´   æ˜**                        |
| ------------------------------------------------------------ | ---------------------------------- |
| updateDate(int year, int monthOfYear, int dayOfMonth)        | è®¾ç½®DatePickerDialogå¯¹è±¡çš„å½“å‰æ—¥æœŸ |
| onDateChanged(DatePicker view, int year, int month, int  day) | ä¿®æ”¹DatePickerDialogå¯¹è±¡çš„æ—¥æœŸ     |
| updateTime(int hourOfDay, int minutOfHour)                   | è®¾ç½®TimePickerDialogå¯¹è±¡çš„æ—¶é—´     |
| onTimeChanged(TimePicker view, int hourOfDay, int minute)    | ä¿®æ”¹TimePickerDialogå¯¹è±¡çš„æ—¶é—´     |

ç¤ºä¾‹è§ä½œä¸šäºŒ`MyServiceStart`ä»£ç 

# åå°æœåŠ¡å’Œç³»ç»ŸæœåŠ¡

è§PPT

å¹¿æ’­å’ŒæœåŠ¡ç¤ºä¾‹ä»£ç è§ä½œä¸šäºŒä»£ç 

# ç½‘ç»œé€šä¿¡

## <del>Webè§†å›¾</del>

ç•¥...

## TCP

TCPæ˜¯`é¢å‘è¿æ¥`çš„é€šä¿¡åè®®ï¼ŒTCPæä¾›ä¸¤å°è®¡ç®—æœºä¹‹é—´çš„`å¯é æ— å·®é”™`çš„æ•°æ®ä¼ è¾“ã€‚

UDPæ˜¯`æ— è¿æ¥`é€šä¿¡åè®®ï¼ŒUDP`ä¸ä¿è¯å¯é æ•°æ®`çš„ä¼ è¾“ã€‚ 

### IP

åœ¨Java.netåŒ…ä¸­ï¼ŒIPåœ°å€ç”±ä¸€ä¸ªç§°ä½œInetAddressçš„ç‰¹æ®Šçš„ç±»æ¥æè¿°

`getLocalHost( )`è¿”å›ä¸€ä¸ªæœ¬åœ°ä¸»æœºçš„IPåœ°å€ã€‚
`getByName(String host )`è¿”å›å¯¹åº”äºæŒ‡å®šä¸»æœºçš„IPåœ°å€ã€‚
`getAllByName(String host )`å¯¹äºæŸä¸ªä¸»æœºæœ‰å¤šä¸ªIPåœ°å€ï¼ˆå¤šå®¿ä¸»æœºï¼‰å¯ç”¨äºå¾—åˆ°ä¸€ä¸ªIPåœ°å€æ•°ç»„ã€‚
æ­¤å¤–ï¼Œå¯¹ä¸€ä¸ªInetAddressçš„å®ä¾‹å¯ä»¥ä½¿ç”¨getAddress( )è·å¾—ä¸€ä¸ªç”¨å­—èŠ‚æ•°ç»„å½¢å¼è¡¨ç¤ºçš„IPåœ°å€ã€‚ 

### Socket

`getInputStream( )`ï¼šè·å¾—ä¸€ä¸ªè¾“å…¥æµï¼Œè¯»å–ä»ç½‘ç»œçº¿è·¯ä¸Šä¼ é€æ¥çš„æ•°æ®ä¿¡æ¯ã€‚
`getOutputStream( )`ï¼šè·å¾—ä¸€ä¸ªè¾“å‡ºæµï¼Œç”¨è¿™ä¸ªè¾“å‡ºæµå°†æ•°æ®ä¿¡æ¯å†™å…¥åˆ°ç½‘ç»œâ€œçº¿è·¯â€ä¸Šã€‚

`ServerSocket(int port)`:åˆ›å»ºSocket

`Socket.accept()`: accept

### HttpClientğŸ

1. åˆ›å»ºHttpClientå¯¹è±¡ã€‚

2. åˆ›å»ºè¯·æ±‚æ–¹æ³•çš„å®ä¾‹ï¼Œå¹¶æŒ‡å®šè¯·æ±‚URLã€‚å¦‚æœéœ€è¦å‘é€GETè¯·æ±‚ï¼Œåˆ›å»ºHttpGetå¯¹è±¡ï¼›å¦‚æœéœ€è¦å‘é€POSTè¯·æ±‚ï¼Œåˆ›å»ºHttpPostå¯¹è±¡ã€‚

3. å¦‚æœéœ€è¦å‘é€è¯·æ±‚å‚æ•°ï¼Œå¯è°ƒç”¨HttpGetã€HttpPostå…±åŒçš„setParams(HttpParams params)æ–¹æ³•æ¥æ·»åŠ è¯·æ±‚å‚æ•°ï¼›å¯¹äºHttpPostå¯¹è±¡è€Œè¨€ï¼Œä¹Ÿå¯è°ƒç”¨setEntity(HttpEntity entity)æ–¹æ³•æ¥è®¾ç½®è¯·æ±‚å‚æ•°ã€‚

4. è°ƒç”¨HttpClientå¯¹è±¡çš„execute(HttpUriRequest request)å‘é€è¯·æ±‚ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ª*HttpResponse*ã€‚

5. è°ƒç”¨HttpResponseçš„getAllHeaders()ã€getHeaders(String name)ç­‰æ–¹æ³•å¯è·å–æœåŠ¡å™¨çš„å“åº”å¤´ï¼›è°ƒç”¨HttpResponseçš„getEntity()æ–¹æ³•å¯è·å–HttpEntityå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…è£…äº†æœåŠ¡å™¨çš„å“åº”å†…å®¹ã€‚ç¨‹åºå¯é€šè¿‡è¯¥å¯¹è±¡è·å–æœåŠ¡å™¨çš„å“åº”å†…å®¹ã€‚

6. é‡Šæ”¾è¿æ¥ã€‚æ— è®ºæ‰§è¡Œæ–¹æ³•æ˜¯å¦æˆåŠŸï¼Œéƒ½å¿…é¡»é‡Šæ”¾è¿æ¥

ç”±äºHttpClient apiç‰ˆæœ¬ä¸åŒæ–¹æ³•ä¸åŒï¼Œæ‰€ä»¥æ²¡æœ‰ç¤ºä¾‹

### HttpUrlConnection

```java
void test(String urls){
    try {
        URL url = new URL(urls);
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.setReadTimeout(5000);
        con.setConnectTimeout(5000);
        con.setRequestProperty("Charset", "UTF-8");
        con.setRequestMethod("GET");
        InputStream is = con.getInputStream();//è·å–è¾“å…¥æµ
        FileOutputStream fileOutputStream = null;//æ–‡ä»¶è¾“å‡ºæµ
        // æµæ“ä½œ.....
    } catch (Exception e) {
        e.printStackTrace();
    }
}
```

# æ•°æ®å‚¨å­˜ğŸ

SQLiteæ•°æ®åº“æ˜¯ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œå› ä¸ºå®ƒå¾ˆå°ï¼Œå¼•æ“æœ¬èº«åªæœ‰ä¸€ä¸ªå¤§å°ä¸åˆ° 300KBçš„æ–‡ä»¶ï¼Œæ‰€ä»¥å¸¸ä½œä¸ºåµŒå…¥å¼æ•°æ®åº“å†…åµŒåœ¨åº”ç”¨ç¨‹åºä¸­ã€‚ 
SQLiteç”Ÿæˆçš„æ•°æ®åº“æ–‡ä»¶æ˜¯ä¸€ä¸ªæ™®é€šçš„ç£ç›˜æ–‡ä»¶ï¼Œå¯ä»¥æ”¾ç½®åœ¨ä»»ä½•ç›®å½•ä¸‹ã€‚ 
SQLiteæ•°æ®åº“çš„ç®¡ç†å·¥å…·å¾ˆå¤šï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰SQLite Expert Professionalã€‚
åœ¨Android ç³»ç»Ÿçš„å†…éƒ¨é›†æˆäº† SQLiteæ•°æ®åº“ï¼Œæ‰€ä»¥ Android åº”ç”¨ç¨‹åºå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨ SQLite æ•°æ®åº“æ¥å­˜å‚¨æ•°æ®ã€‚ 

`SQLiteDatabase`

| æ–¹   æ³•                                                      | è¯´   æ˜          |
| ------------------------------------------------------------ | ---------------- |
| openOrCreateDatabase(String path, SQLiteDatabase.CursorFactory factory) | æ‰“å¼€æˆ–åˆ›å»ºæ•°æ®åº“ |
| openDatabase(String path, SQLiteDatabase.CursorFactory factoryï¼Œint flags) | æ‰“å¼€æŒ‡å®šçš„æ•°æ®åº“ |
| insert(String table, String nullColumnHack, ContentValues values) | æ–°å¢ä¸€æ¡è®°å½•     |
| delete(String table,String whereClause, String[] whereArgs)  | åˆ é™¤ä¸€æ¡è®°å½•     |
| query(String table,String[] columns,String selection, String[]selectionArgs,  String groupBy,String having, String orderBy) | æŸ¥è¯¢ä¸€æ¡è®°å½•     |
| update(String table,ContentValues values,String whereClause,String[] whereArgs) | ä¿®æ”¹è®°å½•         |
| execSQL(String sql)                                          | æ‰§è¡Œä¸€æ¡SQLè¯­å¥  |
| close()                                                      | å…³é—­æ•°æ®åº“       |

`SQLiteOpenHelper`

| æ–¹   æ³•                               | è¯´   æ˜                        |
| ------------------------------------- | ------------------------------ |
| onCreateï¼ˆSQLiteDatabaseï¼‰            | é¦–æ¬¡ç”Ÿæˆæ•°æ®åº“æ—¶å€™è°ƒç”¨è¯¥æ–¹æ³•ã€‚ |
| onOpenï¼ˆSQLiteDatabaseï¼‰              | è°ƒç”¨å·²ç»æ‰“å¼€çš„æ•°æ®åº“ã€‚         |
| onUpgradeï¼ˆSQLiteDatabaseï¼Œintï¼Œintï¼‰ | å‡çº§æ•°æ®åº“æ—¶è°ƒç”¨ã€‚             |
| getWritableDatabase()                 | è¯»å†™æ–¹å¼åˆ›å»ºæˆ–æ‰“å¼€æ•°æ®åº“ã€‚     |
| getReadableDatabase()                 | åˆ›å»ºæˆ–æ‰“å¼€æ•°æ®åº“ã€‚             |

ç¤ºä¾‹ï¼š

ğŸ:`Cursor` ,`ContentValues` ,`SQLiteDatabase.insert()` ,`SQLiteDatabase.update()` ,`SQLiteDatabase.query()`

```java
public class DBHelper extends SQLiteOpenHelper {
    public static final String DATABASE_NAME = "my_database.db";
    public static final int DATABASE_VERSION = 1;
    public static final String TABLE_NAME = "my_table";
    private static final String ID = "_id";
    private static final String USERNAME = "username";
    private static final String PHONE = "phone";
    private static final String EMAIL = "email";
    private static final String Address = "address";
    
    private static final String CREATE_TABLE_SQL = "CREATE TABLE " + TABLE_NAME + " (" +
            ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            USERNAME + " TEXT, "+
            PHONE + " TEXT, "+
            EMAIL + " TEXT, "+
            Address + " TEXT"+
            ")";
    public DBHelper(@Nullable Context context) {
        super(context,DATABASE_NAME,null,DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        sqLiteDatabase.execSQL(CREATE_TABLE_SQL);// åˆ›å»ºæ•°æ®åº“
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {
        //......
    }
	// æ’å…¥æ•°æ®
    public boolean insert(Info info){
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues contentValues = new ContentValues();
        contentValues.put(USERNAME, info.getUsername());
        contentValues.put(PHONE, info.getPhone());
        contentValues.put(EMAIL, info.getEmail());
        contentValues.put(Address, info.getAddress());
        long result = db.insert(TABLE_NAME, null, contentValues);
        db.close();
        return result > 0;
    }
	// åˆ é™¤æ•°æ®
    public int delete(int id){
        SQLiteDatabase db = this.getWritableDatabase();
        int result = db.delete(TABLE_NAME, ID + "=" + id, null);// åˆ é™¤æ¡ä»¶
        db.close();
        return result;
    }
	// æ›´æ–°
    public int update(Info info){
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues contentValues = new ContentValues();
        contentValues.put(USERNAME, info.getUsername());// è®¾ç½®å­—æ®µå€¼
        contentValues.put(PHONE, info.getPhone());
        contentValues.put(EMAIL, info.getEmail());
        contentValues.put(Address, info.getAddress());
        int result = db.update(TABLE_NAME, contentValues, ID + "=" + info.getId(), null);// æ›´æ–°æ¡ä»¶
        db.close();
        return result;
    }
	
    public Info select(int i){
        SQLiteDatabase db = this.getReadableDatabase();
        // æŸ¥è¯¢é™åˆ¶ä¸€æ¡
        // queryå‚æ•°(è¡¨å,columns,selection,selectionArgs,groupBy,having,orderBy,limite)
        // å¦‚ query("t_user","class","name=?,age>=?",new String[]{"dbin",0},"class","sex='ç”·'","10,100");
        // select class from t_user where name='dbin',age>=0 group by class having sex='ç”·' limit 10,100;
        Cursor cursor = db.query(TABLE_NAME, null, null, null, null, null, null,i-1+","+1);
        Info info = new Info();
        if(cursor.moveToFirst()){
            info.setId(cursor.getInt(0));
            info.setUsername(cursor.getString(1));
            info.setPhone(cursor.getString(2));
            info.setEmail(cursor.getString(3));
            info.setAddress(cursor.getString(4));
        }else{
            return null;
        }
        // éå†æŸ¥è¯¢ç»“æœé›†
        while(!cursor.isLast()){
            cursor.moveToNext();
            //......
        }
        cursor.close();
        db.close();
        return info;
    }
}
```

# ä»£ç ç¤ºä¾‹

## Activity(Intent,Bundle)

[ç¤ºä¾‹è§æœ¬é¡µæ´»åŠ¨ä¹‹é—´çš„æ•°æ®ä¼ é€’](#æ´»åŠ¨ä¹‹é—´çš„æ•°æ®ä¼ é€’)

## Button,EditText,TextView

```xml
<?xml version="1.0" encoding="utf-8"?>
<!--çº¿æ€§å¸ƒå±€-->
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <EditText
        android:id="@+id/main.text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="0"
        />
    <Button
        android:id="@+id/main.clear_text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="æ¸…é™¤"/>
    <TextView
            android:id="@+id/main.text.view"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
        <!-- æ— é™å¥—å¨ƒ-->
    </LinearLayout>

</LinearLayout>
```

```java
public class MainActivity extends AppCompatActivity {
    // ç¨‹åºå°†ä¼šå°†ç”¨æˆ·è¾“å…¥å…¨éƒ¨è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åè§£æä¸ºè®¡ç®—å¼ã€‚
    String evalString = "";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText editText = findViewById(R.id.main_text);
        editText.setFocusableInTouchMode(false); // ä¸å¯ä»¥ç¼–è¾‘
        editText.setKeyListener(null); //ä¸å¯ä»¥ç²˜è´´
        editText.setClickable(false);// ä¸å¯ä»¥ç‚¹å‡»
        editText.setText("hello");// ç›´æ¥ä¿®æ”¹å†…å®¹
        
        final TextView tv = findViewById(R.id.main_text_view);
        tv.setText("hello");// è®¾ç½®å†…å®¹
        
        // æŒ‰é’®ç›‘å¬
        Button button = findViewById(R.id.main_clear_text);
        button.setOnClickListener((v)-> {
            evalString = evalString+ finalI;
            editText.setText(evalString);
        });
    }
}
```

## æç¤ºç»„ä»¶(Toast,AlertDialog)

Toast

```java
Toast.makeText(this,"",Toast.LENGTH_SHORT).show();// çŸ­æ—¶é—´
Toast.makeText(this,"",Toast.LENGTH_LONG).show();// é•¿æ—¶é—´
```

[ç¤ºä¾‹è§æœ¬é¡µæ¶ˆæ¯å¯¹è¯æ¡†](#æ¶ˆæ¯å¯¹è¯æ¡†)

## é€‚é…å™¨(ListView,SimpleAdapter)

å¸ƒå±€æ–‡ä»¶

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <ListView

        android:id="@+id/main2.list"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">
    </ListView>
</androidx.constraintlayout.widget.ConstraintLayout>
```

ç»„ä»¶(ç”¨æ¥æ”¾åˆ°ListViewçš„ç»„ä»¶)

å†ImageViewä¸­å¯ä»¥ç›´æ¥è®¾ç½®`android:src="@drawable/...."`è®¾ç½®å…¶å›¾ç‰‡

```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <LinearLayout
        android:id="@+id/list_item"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal">
        <ImageView
            android:id="@+id/header"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:maxHeight="80dp"
            android:maxWidth="80dp"
            android:padding="10dp"/>
        <TextView
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="20dp"
            android:padding="10dp"/>
    </LinearLayout>
</LinearLayout>
```

Javaä»£ç ï¼š

```java
public class MainActivity2 extends AppCompatActivity {
    // å›¾ç‰‡çš„ä¿¡æ¯
    private String[] data = {
            "Apple","Banana","Orange","Watermelon","Pear"
    };
    // å›¾ç‰‡çš„id,æ˜¯æ”¾åœ¨drawableç›®å½•ä¸‹çš„å›¾ç‰‡,æ–‡ä»¶åæ˜¯immg0.jpg,åˆ™idå°±æ˜¯R.drawable.img0
    private int[] header = {
            R.drawable.img0,R.drawable.img1,R.drawable.img2,R.drawable.img3,
            R.drawable.img4
    };
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.activity_main2);
        ListView listView = findViewById(R.id.main2_list);
        // æ·»åŠ å…ƒç´ ç‚¹å‡»çš„ç›‘å¬å™¨
        listView.setOnItemClickListener((adapterView, view, i, l) -> {
            // è·å–å­å…ƒç´ çš„name,æœ€ç»ˆå¯¹åº”çš„å°±æ˜¯å‰é¢å®šä¹‰çš„dataå˜é‡çš„æ•°æ®
            TextView textView = view.findViewById(R.id.name);
            Toast.makeText(this,textView.getText(),Toast.LENGTH_SHORT).show();
            
        });
        // å­˜æ”¾æ•°æ®çš„list
        List<Map<String,Object>> list = new ArrayList<>();
        for(int i=0;i<data.length;i++){
            Map<String,Object> map = new HashMap<>();
            map.put("header",header[i]);// è¡¨ç¤ºheaderæ˜ å°„æ•°æ®åˆ°å¯¹åº”çš„id,
            map.put("data",data[i]);// dataæ˜ å°„ä¸ºå­—ç¬¦ä¸²
            list.add(map);
        }
        // åˆ›å»ºä¸€ä¸ªé€‚é…å™¨ï¼Œé€‚é…å™¨çš„æ•°æ®æ˜¯list,å¸ƒå±€æ˜¯list_array.xml
        // å­å…ƒç´ ä¸­æ•°æ®æ˜¯headerå¯¹åº”header,nameå¯¹åº”data.
        SimpleAdapter simpleAdapter = new SimpleAdapter(
                MainActivity2.this,
                list,
                R.layout.list_array,
                new String[]{"header","data"},
                new int[]{R.id.header,R.id.name}// æ­¤å¤„å°†headeræ˜ å°„åˆ°å¯¹åº”çš„å›¾ç‰‡çš„idä¸Šï¼Œå°†åˆ—è¡¨ä¸­ImageViewçš„æ•°æ®ä¿®æ”¹ä¸ºå¯¹åº”çš„å›¾ç‰‡
                );
        listView.setAdapter(simpleAdapter);
    }
}
```

## æ•°æ®åº“æ“ä½œ

[ç¤ºä¾‹è§æœ¬é¡µæ•°æ®å‚¨å­˜](#æ•°æ®å‚¨å­˜)

## SharedPreferences

```java
SharedPreferences sp = getSharedPreferences("info",MODE_PRIVATE);
SharedPreferences.Editor editor = sp.edit();
String t = sp.getString("t",null);// get and set
editor.clear();// æ¸…ç©º
editor.commit();// æäº¤ä»»åŠ¡
```



## æœåŠ¡å’Œå¹¿æ’­

### ç¼–å†™æœåŠ¡

éŸ³ä¹æ’­æ”¾

```java
public class MusicPlayerService extends Service implements MediaPlayer.OnPreparedListener, MediaPlayer.OnCompletionListener {
    private static final String TAG = "MusicPlayerService";
    private MediaPlayer mediaPlayer;
    private boolean isPrepared = false;// å¥½åƒæ²¡å•¥ç”¨
    private boolean isStart = false;
    @Override
    public void onCreate() {
        super.onCreate();
        mediaPlayer = MediaPlayer.create(this, R.raw.wojide);// è¿™é‡Œæ³¨æ„å’Œè‡ªå·±çš„æ–‡ä»¶å¯¹åº”
        mediaPlayer.setOnPreparedListener(this); // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“å‡†å¤‡å¥½çš„æ—¶å€™ä¼šå›è°ƒonPreparedæ–¹æ³•
        mediaPlayer.setOnCompletionListener(this); // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“æ’­æ”¾å®Œæˆçš„æ—¶å€™ä¼šå›è°ƒonCompletionæ–¹æ³•
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        if (intent != null) 
            String action = intent.getAction();
            if ("PLAY_MUSIC".equals(action)) {
                if(mediaPlayer==null){
                    mediaPlayer = MediaPlayer.create(this, R.raw.wojide);
                    mediaPlayer.setOnPreparedListener(this); // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“å‡†å¤‡å¥½çš„æ—¶å€™ä¼šå›è°ƒonPreparedæ–¹æ³•
                    mediaPlayer.setOnCompletionListener(this); // æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œå½“æ’­æ”¾å®Œæˆçš„æ—¶å€™ä¼šå›è°ƒonCompletionæ–¹æ³•
                }
               isStart = true;
            }
            // åœæ­¢æ’­æ”¾
            if("STOP_MUSIC".equals(action)){
                if(mediaPlayer!=null){
                    mediaPlayer.stop();
                    mediaPlayer.release();
                    mediaPlayer = null;
                    isPrepared = false;
                }
            }
        }
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onPrepared(MediaPlayer mp) {
        
    }

    @Override
    public void onCompletion(MediaPlayer mp) {
        stopSelf();
    }
}
```

### æ³¨å†ŒæœåŠ¡

```xml
<service
            android:name=".music.MusicPlayerService"
            android:exported="false"/>
```



### è°ƒç”¨æœåŠ¡

```java
Intent playIntent = new Intent(this, MusicPlayerService.class);
playIntent.putExtra("time",time);
playIntent.setAction("PLAY_MUSIC");
startService(playIntent);
stopService(playIntent);
```

### æ³¨å†Œå¹¿æ’­

``` java
public class MyServiceStart extends AppCompatActivity {
    protected void onCreate(Bundle savedInstanceState){
		localBroadcastManager = LocalBroadcastManager.getInstance(this); // è·å–å®ä¾‹
        intentFilter = new IntentFilter();
        intentFilter.addAction(BROADCAST_ACTION);// BROADCAST_ACTIONå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²
        localReceiver = new LocalReceiver();
        localBroadcastManager.registerReceiver(localReceiver, intentFilter);
    }
    // ä¸€ä¸ªå†…éƒ¨å†…ï¼Œç”¨æ¥å¤„ç†å¹¿æ’­
    class LocalReceiver extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            // å¤„ç†
        }
    }
}
```

### å‘é€å¹¿æ’­

``` java
Intent intent = new Intent(MyServiceStart.BROADCAST_ACTION);//BROADCAST_ACTION æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²
localBroadcastManager.sendBroadcast(intent);
```

## AndroidMainfestæ³¨å†Œ

```xml
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">
	<!--è¿™ä¸ªæ˜¯è·å–ç½‘ç»œæƒé™-->
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@style/Theme.Application1"
        tools:targetApi="31">
        <!--è¿™ä¸ªæ˜¯æ³¨å†ŒæœåŠ¡-->
        <service
            android:name=".music.MusicPlayerService"
            android:exported="false"/>
        <!--æ™®é€šçš„æ´»åŠ¨-->
        <activity
            android:name=".MainActivity"
            android:exported="false" />
        <!--ä¸‹é¢è¿™ä¸ªæ˜¯å¯åŠ¨ç±»(æ´»åŠ¨)-->
        <activity
            android:name=".StartActivity"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest>
```

